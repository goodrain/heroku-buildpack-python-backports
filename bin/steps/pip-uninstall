# Install dependencies with Pip.

if [[ -f .heroku/python/requirements-declared.txt ]]; then

  cp .heroku/python/requirements-declared.txt requirements-declared.txt

  diff  requirements-declared.txt requirements.txt | grep -v -E  'setuptools|pip|wheel' | sed 1d | sed 's/> //' > .heroku/python/requirements-stale.txt

  rm -fr requirements-declared.txt

  if [[ -s .heroku/python/requirements-stale.txt ]]; then
    puts-step "Uninstalling stale dependencies"
    /app/.heroku/python/bin/pip uninstall -r .heroku/python/requirements-stale.txt -y --exists-action=w | cleanup | indent
  fi
fi